## 代码整洁之道

### 1.整洁代码

沼泽（糟糕的代码）：我们趟过代码的水域，穿过灌木密布、瀑布暗藏的沼泽地，我们拼命想找到出路，期望有点什么显示能启发我们到底发生了什么事；但目光所及，只是越来越多死气沉沉的代码。  
稍后 等于 永不(later equals never)

### 4.注释

注释的恰当用法是弥补我们用代码表达意图时遭遇的**失败**  
注释是一种失败，因为无法找到不用注释就能表达自我的方法  
不准确的注释比没注释坏的多。它们满口胡言，它们预期的东西不能实现，它们设定了无需也不应再遵守的旧规则。  
真实只在一处地方有：代码。只有代码能忠实的告诉你它做的事，那是唯一真正准确的信息来源。

#### 4.1 注释不能美化糟糕的代码

与其花时间编写解释你搞出的糟糕的代码的注释，不如花时间清洁那堆糟糕的代码

#### 4.2 用代码来阐述

用代码解释意图(或许需要创建一个描述与注释所言同一事物的函数)

#### 4.3 好的注释

开头放置版权及著作权声明  
注释可以用来提供基本信息（返回值） 对意图进行解释  
阐释：将某些晦涩难懂的参数或返回值的意义翻译成某种可读的形式  
警告其他人会出现某种后果  
// TODO 展示一些认为应该做，但由于某些原因还没做的工作

#### 4.4坏注释

喃喃自语、多余的注释、误导性注释、循规式注释、日志式注释、废话注释  
能用函数或变量时别用注释、不用注释进行位置标记、不注释代码(直接删除)  
注释靠近代码、信息不要太多、函数名 > 注释

### 5.格式

当有人查看底层代码实现时，我们希望他们为整洁、一致及所感知到的对细节的关注而震惊。我们希望他们高高扬起眉毛，一路看下去。我们希望他们感受到那些为之劳作的专业人士们。但若他们看到的只是一堆像是由醉酒的水手写出的鬼画符，那他们多半会得出结论，认为项目其他任何部分也同样对细节漠不关心。

#### 5.1格式的目的

你今天编写的功能，既有可能再下一版本被修改，但代码的可读性却会对以后可能发生的修改行为产生深远影响。原始代码修改之后很久，其代码风格和可读性仍会影响到可维护性和扩展性。即便代码不复存在，你的风格和律条仍存活下来。

短文件  
垂直方向上的区隔(不同方法之间等增加空白行)  
关系紧密的变量之间靠近  
变量的上面要靠近使用  
循环中的控制变量应在循环语句中声明  
本地变量放于顶部  
函数调用者放在被调用者上方  
概念相关(执行相似操作)的代码放到一起  
横向字符数量 < 120

### 6.对象和数据结构

对象隐藏数据，暴露操作

过程式编程(使用数据结构的代码)便于在不改动现有数据结构的前提下添加新函数  
面向对象代码便于在不该打现有函数的前提下添加新类

过程式代码难以添加新数据结构，因为必须修改所有函数  
面向对象代码难以添加新函数，因为必须修改所有的类

#### 得墨忒定律

模块不应了解它所操作对象的内部情形  
类C的方法f只应该调用以下方法：

* C
* 由f创建的对象
* 作为参数传递给f的对象
* 由C的实体变量持有的对象  

















